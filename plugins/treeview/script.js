(function(a){a.fn.treeView=function(c){function s(b,e){if(c.stateStore){var d=a.jStorage.get(c.stateStore,[]);if(e)a.inArray(b,d)<0&&d.push(b);else d=a.grep(d,function(f){return f!=b});a.jStorage.set(c.stateStore,d)}}function t(b){return c.stateStore&&a.inArray(b,a.jStorage.get(c.stateStore,[]))>=0}function m(b){var e=b[3],d=a('<li><div class="'+(b[1]?"hitarea collapsed":"placeholder")+'"><div class="arrow"/><div class="'+b[2]+'"/></div><a href="'+e+'">'+b[4]+"</a></li>"),f=d.children(".hitarea");
d.data("name",b[4]).data("tree",b[0]?1:0);f.click(function(){if(f.hasClass("collapsed")){n(d,e);f.removeClass("collapsed").addClass("expanded")}else{d.children("ul").hide();f.removeClass("expanded").addClass("collapsed")}s(e,f.hasClass("expanded"));return false});if(t(e)){n(d,e);f.removeClass("collapsed").addClass("expanded")}return d}function n(b,e){function d(h){k&&a.jStorage.set(k,h)}function f(h){var i=a("<ul/>");a.each(h,function(o,j){i.append(m(j))});e==c.root&&b.empty();b.children("ul").remove();
b.removeClass("wait").append(i)}function u(h){d(h);var i={},o=[];a.each(h,function(j,g){i[g[4]]=g});a("> ul > li",b).each(function(){var j=a(this),g=j.data("name");if(i[g])delete i[g];else j.remove();o.push(a(this))});a.each(i,function(j,g){var p=false;a.each(o,function(v,l){if(g[0]&&!l.data("tree")||j<l.data("name")&&g[0]==l.data("tree")){p=true;l.before(m(g));return false}});p||b.children("ul").append(m(g))})}function q(){setTimeout(function(){a.ajax({url:c.url,data:{dir:e},success:u,error:function(){k&&
a.jStorage.deleteKey(k)}})},c.delay)}var k=c.cacheStore?c.cacheStore+":"+e:null;if(b.children("ul").length!=0){b.children("ul").show();q()}else{b.addClass("wait");var r=k?a.jStorage.get(k):null;if(r){f(r);q()}else a.getJSON(c.url,{dir:e},function(h){f(h);d(h)})}}c||(c={});if(!c.root)c.root="/";if(!c.url)c.url="/_/treeview.json";if(!c.delay)c.delay=2E3;this.each(function(){n(a(this),c.root)})}})(jQuery);$.translations({en:{menu:"Menu",tree:"Tree"},de:{menu:"Men\u00fc",tree:"Baumansicht"}});
(function(){var a=$("#sidebar");a.html('<div id="treeview-tabs"><ul><li class="tabs-selected"><a href="#sidebar-menu">'+$.t("menu")+'</a></li><li><a href="#sidebar-treeview">'+$.t("tree")+'</a></li></ul></div><div id="sidebar-treeview"><h1>'+$.t("tree")+'</h1><div id="treeview"/></div><div id="sidebar-menu">'+a.html()+"</div>");$("#treeview-tabs").tabs({store:"treeview-tabs"});$("#treeview").treeView({stateStore:"treeview-state",cacheStore:"treeview-cache"})})();
