(function(a){a.extend(a.fn,{treeView:function(c){if(!c){c={}}if(!c.root){c.root="/"}if(!c.url){c.url="/_/treeview.json"}function e(g,i){if(g.children("ul").length!=0){g.children("ul").show();return}g.addClass("wait");function h(k){var j="<ul>";a.each(k,function(l,m){j+='<li><div class="'+(m[0]?"hitarea collapsed":"placeholder")+'"><div class="arrow"/><div class="'+m[1]+'"/></div><a href="'+m[2]+'">'+m[3]+"</a></li>"});j+="</ul>";if(i==c.root){g.empty()}g.children("ul").remove();g.removeClass("wait").append(j);b(g)}a.ajax({url:c.url,data:{dir:i},dataType:"json",type:"GET",success:h});a.ajax({url:c.url,data:{dir:i},dataType:"json",type:"GET",success:h,cache:false})}function f(g){return c.store&&a.inArray(g,a.store.get(c.store,[]))>=0}function d(i,g){if(c.store){var h=a.store.get(c.store,[]);if(!g){h=a.grep(h,function(k,j){return k!=i})}else{if(a.inArray(i,h)<0){h.push(i)}}a.store.set(c.store,h)}}function b(g){g.find("li > .hitarea").click(function(){var h=a(this),i=h.parent(),j=i.children("a").attr("href");if(h.hasClass("collapsed")){e(i,j);h.removeClass("collapsed").addClass("expanded")}else{i.children("ul").hide();h.removeClass("expanded").addClass("collapsed")}d(j,h.hasClass("expanded"));return false}).each(function(){var h=a(this),i=h.parent(),j=i.children("a").attr("href");if(f(j)){e(i,j);h.removeClass("collapsed").addClass("expanded")}})}this.each(function(){e(a(this),c.root)})}})})(jQuery);$(function(){if($.browser.mozilla||$.browser.safari){sidebar=$("#sidebar");sidebar.html('<div id="treeview-tabs"><ul><li class="tabs-selected"><a href="#sidebar-menu">Menu</a></li><li><a href="#sidebar-treeview">Tree</a></li></ul></div><div id="sidebar-treeview"><h1>Tree</h1><div id="treeview"></div></div><div id="sidebar-menu">'+sidebar.html()+"</div>");$("#treeview-tabs").tabs({store:"treeview-tabs"});$("#treeview").treeView({store:"treeview"})}});